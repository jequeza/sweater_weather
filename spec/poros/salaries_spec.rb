require 'rails_helper'

RSpec.describe Salaries do
  it "exists" do

    weather_data = {:dt=>1619455093,
                     :sunrise=>1619437916,
                     :sunset=>1619485513,
                     :temp=>74.43,
                     :feels_like=>74.57,
                     :pressure=>1014,
                     :humidity=>64,
                     :dew_point=>61.47,
                     :uvi=>7.95,
                     :clouds=>100,
                     :visibility=>10000,
                     :wind_speed=>11.5,
                     :wind_deg=>150,
                     :wind_gust=>21.85,
                     :weather=>[{:id=>804, :main=>"Clouds", :description=>"overcast clouds", :icon=>"04d"}]}


    salaries_data = [{:job=>{:id=>"ACCOUNT-MANAGER", :title=>"Account Manager"},
                      :salary_percentiles=>{:percentile_25=>51778.59069563125, :percentile_50=>64827.43670887085, :percentile_75=>81164.7534971871}},
                     {:job=>{:id=>"ACCOUNTANT", :title=>"Accountant"},
                      :salary_percentiles=>{:percentile_25=>43543.112024690636, :percentile_50=>51712.31509555319, :percentile_75=>61414.15733045042}},
                     {:job=>{:id=>"ADMINISTRATIVE-ASSISTANT", :title=>"Administrative Assistant"},
                      :salary_percentiles=>
                       {:percentile_25=>30119.734151989436, :percentile_50=>36273.147918217095, :percentile_75=>43683.694326696146}},
                     {:job=>{:id=>"ARCHITECT", :title=>"Architect"},
                      :salary_percentiles=>{:percentile_25=>42482.98689479475, :percentile_50=>52605.43309482685, :percentile_75=>65139.760486882646}},
                     {:job=>{:id=>"ATTORNEY", :title=>"Attorney"},
                      :salary_percentiles=>{:percentile_25=>66144.50082444095, :percentile_50=>89323.38079614232, :percentile_75=>120624.78750923554}},
                     {:job=>{:id=>"BUSINESS-ANALYST", :title=>"Business Analyst"},
                      :salary_percentiles=>{:percentile_25=>52431.95975706849, :percentile_50=>62896.57418216779, :percentile_75=>75449.765032283}},
                     {:job=>{:id=>"BUSINESS-DEVELOPMENT", :title=>"Business Development"},
                      :salary_percentiles=>{:percentile_25=>57233.45938007348, :percentile_50=>75826.05037169177, :percentile_75=>100458.54255967145}},
                     {:job=>{:id=>"C-LEVEL-EXECUTIVE", :title=>"C Level Executive"},
                      :salary_percentiles=>{:percentile_25=>103098.48650249836, :percentile_50=>154570.96829105017, :percentile_75=>231741.3673948925}},
                     {:job=>{:id=>"CASHIER", :title=>"Cashier"},
                      :salary_percentiles=>{:percentile_25=>14696.444895748753, :percentile_50=>20588.982006970524, :percentile_75=>28844.13088269936}},
                     {:job=>{:id=>"CHEF", :title=>"Chef"},
                      :salary_percentiles=>{:percentile_25=>33127.05864030165, :percentile_50=>40689.06716782813, :percentile_75=>49977.277034003324}},
                     {:job=>{:id=>"CHEMICAL-ENGINEER", :title=>"Chemical Engineer"},
                      :salary_percentiles=>{:percentile_25=>59065.43077969654, :percentile_50=>71571.82738956343, :percentile_75=>86726.30349531469}},
                     {:job=>{:id=>"CIVIL-ENGINEER", :title=>"Civil Engineer"},
                      :salary_percentiles=>{:percentile_25=>51031.81857819062, :percentile_50=>60838.06388445608, :percentile_75=>72528.6717254275}},
                     {:job=>{:id=>"CONTENT-MARKETING", :title=>"Content Marketing"},
                      :salary_percentiles=>{:percentile_25=>41278.67059133769, :percentile_50=>51683.023407774985, :percentile_75=>64709.80945614932}},
                     {:job=>{:id=>"COPYWRITER", :title=>"Copywriter"},
                      :salary_percentiles=>{:percentile_25=>41249.27388375781, :percentile_50=>50721.92974417916, :percentile_75=>62369.92593429555}},
                     {:job=>{:id=>"CUSTOMER-SUPPORT", :title=>"Customer Support"},
                      :salary_percentiles=>{:percentile_25=>31899.75833742206, :percentile_50=>41012.65605845369, :percentile_75=>52728.862055227415}},
                     {:job=>{:id=>"DATA-ANALYST", :title=>"Data Analyst"},
                      :salary_percentiles=>{:percentile_25=>48238.13431895125, :percentile_50=>58055.14160627166, :percentile_75=>69870.02118778319}},
                     {:job=>{:id=>"DATA-SCIENTIST", :title=>"Data Scientist"},
                      :salary_percentiles=>{:percentile_25=>91527.83905546702, :percentile_50=>110566.93566272646, :percentile_75=>133566.43604834768}},
                     {:job=>{:id=>"DENTIST", :title=>"Dentist"},
                      :salary_percentiles=>
                       {:percentile_25=>104944.27079868446, :percentile_50=>136673.24281999576, :percentile_75=>177995.18888236137}},
                     {:job=>{:id=>"ELECTRICAL-ENGINEER", :title=>"Electrical Engineer"},
                      :salary_percentiles=>{:percentile_25=>68395.12069132873, :percentile_50=>81541.93013596612, :percentile_75=>97215.79994436304}},
                     {:job=>{:id=>"EXECUTIVE-ASSISTANT", :title=>"Executive Assistant"},
                      :salary_percentiles=>{:percentile_25=>37939.29903790192, :percentile_50=>45887.693171014915, :percentile_75=>55501.29912662865}},
                     {:job=>{:id=>"FASHION-DESIGNER", :title=>"Fashion Designer"},
                      :salary_percentiles=>{:percentile_25=>35686.38309144738, :percentile_50=>46068.18883525333, :percentile_75=>59470.24715623775}},
                     {:job=>{:id=>"FINANCE-MANAGER", :title=>"Finance Manager"},
                      :salary_percentiles=>{:percentile_25=>55470.188818978815, :percentile_50=>70070.36482168025, :percentile_75=>88513.41830232757}},
                     {:job=>{:id=>"FINANCIAL-ANALYST", :title=>"Financial Analyst"},
                      :salary_percentiles=>{:percentile_25=>50987.49904030413, :percentile_50=>59338.811035811195, :percentile_75=>69057.99581109846}},
                     {:job=>{:id=>"GRAPHIC-DESIGNER", :title=>"Graphic Designer"},
                      :salary_percentiles=>{:percentile_25=>38762.980874980356, :percentile_50=>46156.93137691624, :percentile_75=>54961.261132228}},
                     {:job=>{:id=>"HARDWARE-ENGINEER", :title=>"Hardware Engineer"},
                      :salary_percentiles=>{:percentile_25=>66338.48674649661, :percentile_50=>80598.09060761906, :percentile_75=>97922.82773072198}},
                     {:job=>{:id=>"HUMAN-RESOURCES-MANAGER", :title=>"Human Resources Manager"},
                      :salary_percentiles=>{:percentile_25=>58100.17167116358, :percentile_50=>70948.81770326477, :percentile_75=>86638.89604287437}},
                     {:job=>{:id=>"IT-MANAGER", :title=>"IT Manager"},
                      :salary_percentiles=>{:percentile_25=>69426.2652777706, :percentile_50=>85073.32661453434, :percentile_75=>104246.87072401952}},
                     {:job=>{:id=>"INDUSTRIAL-DESIGNER", :title=>"Industrial Designer"},
                      :salary_percentiles=>{:percentile_25=>39018.12022118699, :percentile_50=>47931.24239736119, :percentile_75=>58880.43772306323}},
                     {:job=>{:id=>"INTERIOR-DESIGNER", :title=>"Interior Designer"},
                      :salary_percentiles=>{:percentile_25=>40848.642871845914, :percentile_50=>49288.94176689615, :percentile_75=>59473.20668944165}},
                     {:job=>{:id=>"LECTURER", :title=>"Lecturer"},
                      :salary_percentiles=>{:percentile_25=>53468.16766890921, :percentile_50=>65885.93611961653, :percentile_75=>81187.68171070836}},
                     {:job=>{:id=>"MARKETING-MANAGER", :title=>"Marketing Manager"},
                      :salary_percentiles=>{:percentile_25=>54400.98270002259, :percentile_50=>68329.00024507119, :percentile_75=>85822.94000525473}},
                     {:job=>{:id=>"MECHANICAL-ENGINEER", :title=>"Mechanical Engineer"},
                      :salary_percentiles=>{:percentile_25=>64429.1364254419, :percentile_50=>75540.81057153353, :percentile_75=>88568.84289311925}},
                     {:job=>{:id=>"MOBILE-DEVELOPER", :title=>"Mobile Developer"},
                      :salary_percentiles=>{:percentile_25=>61462.76508278825, :percentile_50=>76870.42564151403, :percentile_75=>96140.52232027361}},
                     {:job=>{:id=>"NURSE", :title=>"Nurse"},
                      :salary_percentiles=>{:percentile_25=>54324.904333105966, :percentile_50=>60434.923331735015, :percentile_75=>67232.14707783487}},
                     {:job=>{:id=>"OFFICE-MANAGER", :title=>"Office Manager"},
                      :salary_percentiles=>{:percentile_25=>34178.19495828691, :percentile_50=>41785.23914001906, :percentile_75=>51085.38388640798}},
                     {:job=>{:id=>"OPERATIONS-MANAGER", :title=>"Operations Manager"},
                      :salary_percentiles=>{:percentile_25=>57536.2999458845, :percentile_50=>73328.71759878783, :percentile_75=>93455.79798736073}},
                     {:job=>{:id=>"PHARMACIST", :title=>"Pharmacist"},
                      :salary_percentiles=>{:percentile_25=>93643.77010457171, :percentile_50=>104321.04259897798, :percentile_75=>116215.73882368147}},
                     {:job=>{:id=>"PHYSICIAN", :title=>"Physician"},
                      :salary_percentiles=>
                       {:percentile_25=>100062.93203160494, :percentile_50=>136331.87135498915, :percentile_75=>185746.89717549743}},
                     {:job=>{:id=>"POSTDOCTORAL-RESEARCHER", :title=>"Postdoctoral Researcher"},
                      :salary_percentiles=>{:percentile_25=>39576.29364086162, :percentile_50=>44759.58175728168, :percentile_75=>50621.722621804525}},
                     {:job=>{:id=>"PRODUCT-MANAGER", :title=>"Product Manager"},
                      :salary_percentiles=>{:percentile_25=>75718.57650160094, :percentile_50=>93049.0621630156, :percentile_75=>114346.15347310022}},
                     {:job=>{:id=>"PROJECT-MANAGER", :title=>"Project Manager"},
                      :salary_percentiles=>{:percentile_25=>62137.725487013115, :percentile_50=>76806.98457126255, :percentile_75=>94939.31154855563}},
                     {:job=>{:id=>"QA-ENGINEER", :title=>"QA Engineer"},
                      :salary_percentiles=>{:percentile_25=>52531.10327567422, :percentile_50=>64756.33737123482, :percentile_75=>79826.67349914635}},
                     {:job=>{:id=>"RECEPTIONIST", :title=>"Receptionist"},
                      :salary_percentiles=>{:percentile_25=>20758.650576880344, :percentile_50=>25142.19119584933, :percentile_75=>30451.390652177997}},
                     {:job=>{:id=>"RESEARCH-SCIENTIST", :title=>"Research Scientist"},
                      :salary_percentiles=>{:percentile_25=>56113.89968937731, :percentile_50=>71916.65536710774, :percentile_75=>92169.77162202894}},
                     {:job=>{:id=>"SALES-MANAGER", :title=>"Sales Manager"},
                      :salary_percentiles=>{:percentile_25=>42613.814661183926, :percentile_50=>56321.212145527774, :percentile_75=>74437.80761619844}},
                     {:job=>{:id=>"SOFTWARE-ENGINEER", :title=>"Software Engineer"},
                      :salary_percentiles=>{:percentile_25=>65767.1634821955, :percentile_50=>80160.80646329377, :percentile_75=>97704.60747611875}},
                     {:job=>{:id=>"SYSTEMS-ADMINISTRATOR", :title=>"Systems Administrator"},
                      :salary_percentiles=>{:percentile_25=>54428.18635763126, :percentile_50=>65505.12482852944, :percentile_75=>78836.38360842798}},
                     {:job=>{:id=>"TEACHER", :title=>"Teacher"},
                      :salary_percentiles=>{:percentile_25=>39459.67541966999, :percentile_50=>48803.63842770049, :percentile_75=>60360.2310067264}},
                     {:job=>{:id=>"UX-DESIGNER", :title=>"UX Designer"},
                      :salary_percentiles=>{:percentile_25=>63503.558112170176, :percentile_50=>77864.69459063392, :percentile_75=>95473.55839468726}},
                     {:job=>{:id=>"WAITER", :title=>"Waiter"},
                      :salary_percentiles=>
                       {:percentile_25=>16887.258495624723, :percentile_50=>25848.553533691353, :percentile_75=>39565.197628568094}},
                     {:job=>{:id=>"WEB-DESIGNER", :title=>"Web Designer"},
                      :salary_percentiles=>{:percentile_25=>40084.46116925613, :percentile_50=>49048.160161547574, :percentile_75=>60016.324157999574}},
                     {:job=>{:id=>"WEB-DEVELOPER", :title=>"Web Developer"},
                      :salary_percentiles=>{:percentile_25=>57185.38761202457, :percentile_50=>70858.51357411596, :percentile_75=>87800.90781228538}}]


    location = 'austin'

    salaries = Salaries.new(weather_data, salaries_data, location)
    expect(salaries).to be_a Salaries
    expect(salaries.destination).to eq(location)
    expect(salaries.forecast).to be_a SalariesCurrentWeather
    expect(salaries.id).to be_nil
    expect(salaries.salaries).to be_an Array
    expect(salaries.salaries.length).to eq(7)
    expect(salaries.salaries.first).to be_a TechSalaries
  end
end